{"version":3,"sources":["webpack:///webpack/bootstrap 45c5f7fe7d5dc8962e81","webpack:///./components/app/app.js","webpack:///./components/menu/menu.js","webpack:///./components/form/form.js","webpack:///./components/model/model.js","webpack:///./components/services/http.js"],"names":["menuModel","resource","data","menu","el","document","querySelector","on","setData","render","get","then","console","log","JSON","parse","responseText","version","error","form","event","detail","addItem","getData","save","fetch","tmpl","window","menuTmpl","Menu","_onClick","bind","_initEvents","innerHTML","removedItem","items","filter","item","index","itemData","push","addEventListener","closeButton","parentNode","dataset","removeItem","pickButton","anchor","open","preventDefault","target","action","_onRemoveClick","_onPickClick","_onDetailsClick","formTmpl","Form","name","value","href","getValueByName","details","isEmpty","callback","CustomEvent","bubbles","dispatchEvent","_onSubmit","trigger","reset","Model","_handlers","_data","_makeRequset","forEach","method","xhr","XMLHttpRequest","onreadystatechange","readyState","status","send","stringify","httpService","_makeRequest","url","done","fail","Promise","resolve","reject","post","Error"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 45c5f7fe7d5dc8962e81","  //import\r\n  import {Menu} from '../menu/menu';\r\n  import {Form} from '../form/form';\r\n  import {Model} from '../model/model';\r\n  import {httpService} from '../services/http';\r\n\r\n  let menuModel = new Model({\r\n  \tresource: 'https://componentsEd.firebaseio.com/menu/-KbF0gr0YWX7qmv3olV1.json',\r\n  \tdata: {}\r\n  });\r\n\r\n  let menu = new Menu({\r\n      el: document.querySelector('.js-menu')\r\n  });\r\n\r\n  menuModel.on('update', data => {\r\n  \tmenu.setData(data);\r\n  \tmenu.render();\r\n  });\r\n\r\n  // fetch('http://127.0.0.1:8181/components/data/menu.json')\r\n  // .then(response => response.json())\r\n  // .then(data => {\r\n  //   let menu = new Menu({\r\n  //     el: document.querySelector('.js-menu'),\r\n  //     data\r\n  //   });\r\n  //\r\n  //   let form = new Form({\r\n  //     el: document.querySelector('.js-form'),\r\n  //     onSubmit: function(data) {\r\n  //       menu.addItem(data);\r\n  //     }\r\n  //   });\r\n  //\r\n  // });\r\n\r\n  httpService.get('/package.json').then(responseText => {\r\n    console.log(`Version number: ${JSON.parse(responseText).version}`);\r\n  }, xhr => { console.error('Unknown version') });\r\n\r\n\r\n\r\n  // httpService.get('/components/data/menu.json').then(responseText => {\r\n  //   menu.setData(JSON.parse(responseText));\r\n  //   menu.render();\r\n  // }, xhr => { console.error('Menu render failed') });\r\n\r\n  let form = new Form({\r\n      el: document.querySelector('.js-form')\r\n  });\r\n\r\n  form.on('add', event => {\r\n  \tif (event.detail) {\r\n      menu.addItem(event.detail); // обновляю интерфейс\r\n      menuModel.setData(menu.getData()); // обновляю данные в моделе\r\n   \t  menuModel.save(); // сохраняю изменения на сервере\r\n    }\r\n  });\r\n\r\n  menuModel.fetch();\r\n\n\n\n// WEBPACK FOOTER //\n// ./components/app/app.js","\r\n  //import\r\n  let tmpl = window.menuTmpl;\r\n\r\n  /**\r\n   * @class Menu\r\n   * Компонента \"Меню\"\r\n   */\r\n  class Menu {\r\n    /**\r\n\t\t * @constructor\r\n\t\t * @param  {Object} opts\r\n\t\t */\r\n    constructor({el, data = {}}) {\r\n      this.el = el;\r\n      this.data = data;\r\n      this.tmpl = tmpl;\r\n      this._onClick = this._onClick.bind(this);\r\n\r\n      if ('items' in data) this.render();\r\n      this._initEvents();\r\n    }\r\n    /**\r\n     * Отрисовка меню\r\n     */\r\n    render() {\r\n\r\n      this.el.innerHTML = this.tmpl(this.data);\r\n    }\r\n\r\n    /**\r\n\t\t * записывает данные\r\n\t\t * @param  {Object} itemData\r\n\t\t */\r\n\t\tsetData (data) {\r\n\t\t\tthis.data = data;\r\n\t\t}\r\n\r\n    /**\r\n\t\t * возвращает данные\r\n\t\t * @param  {Object} itemData\r\n\t\t */\r\n\t\tgetData () {\r\n\t\t\treturn this.data;\r\n\t\t}\r\n\r\n    /**\r\n\t\t * Удаляем пункт меню из данных\r\n\t\t * @param  {Object} removedItem\r\n\t\t */\r\n\t\tremoveItem (removedItem) {\r\n\r\n\t\t\tthis.data.items = this.data.items.filter((item, index) => {\r\n\t\t\t\treturn index !== removedItem.index;\r\n\t\t\t});\r\n\r\n\t\t\tthis.render();\r\n\t\t\tconsole.log('remove', removedItem);\r\n\t\t}\r\n\r\n\r\n\t\t/**\r\n\t\t * Добавляем пункт меню из данных\r\n\t\t * @param  {Object} itemData\r\n\t\t */\r\n\t\taddItem (itemData) {\r\n      if (!this.data.items) this.data.items = [];\r\n\t\t\tthis.data.items.push(itemData);\r\n\r\n\t\t\tthis.render();\r\n\t\t\tconsole.log('added', itemData);\r\n\t\t}\r\n\r\n    /**\r\n     * Развешиваем события\r\n     */\r\n    _initEvents() {\r\n      this.el.addEventListener('click', this._onClick);\r\n    }\r\n\r\n    /**\r\n\t\t* Удаление элемента меню\r\n\t\t* @param  {HTMLElement} item\r\n\t\t* @private\r\n\t\t*/\r\n    _onRemoveClick(closeButton) {\r\n      let index = +closeButton.parentNode.dataset.index;\r\n      this.removeItem ({\r\n        index\r\n      });\r\n    }\r\n\r\n    /**\r\n    * Удаление элемента меню\r\n    * @param  {HTMLElement} item\r\n    * @private\r\n    */\r\n    _onPickClick(pickButton) {\r\n      let index = +pickButton.parentNode.dataset.index;\r\n      console.log(this.data.items[index].anchor);\r\n    }\r\n\r\n    /**\r\n     * Показ деталей\r\n     * @param  {HTMLElement} item\r\n     * @private\r\n     */\r\n    _onDetailsClick(item) {\r\n      item.open = !item.open;\r\n      console.log(item.open ? 'open' : 'closed');\r\n    }\r\n\r\n    /**\r\n\t\t* Клик в любую область меню\r\n\t\t* @param {MouseEvent} event\r\n\t\t* @private\r\n\t\t*/\r\n    _onClick(event) {\r\n      event.preventDefault();\r\n      let item = event.target;\r\n      switch (item.dataset.action) {\r\n        case 'remove':\r\n          this._onRemoveClick(item);\r\n          break;\r\n        case 'pick':\r\n          this._onPickClick(item);\r\n          break;\r\n        case 'showDetails':\r\n          this._onDetailsClick(item);\r\n          break;\r\n      }\r\n\r\n    }\r\n\r\n  }\r\n\r\n\r\n  export {Menu};\r\n\n\n\n// WEBPACK FOOTER //\n// ./components/menu/menu.js","\r\n  //import\r\n  let tmpl = window.formTmpl;\r\n\r\n  /**\r\n   * @class Form\r\n   * Компонента \"Форма\"\r\n   */\r\n  class Form {\r\n    /**\r\n     * @constructor\r\n     * @param  {Object} options\r\n     */\r\n    constructor({el}) {\r\n      this.el = el;\r\n      this.tmpl = tmpl;\r\n\r\n      this.render();\r\n      this._initEvents();\r\n    }\r\n\r\n    /**\r\n     * Отрисовка формы\r\n     */\r\n    render() {\r\n      this.el.innerHTML = this.tmpl();\r\n    }\r\n\r\n    /**\r\n     * Получение значения поля ввода по имени\r\n     * @param {string}\r\n     */\r\n    getValueByName(name) {\r\n      return this.el.querySelector(`[name=${name}]`).value;\r\n    }\r\n\r\n    /**\r\n     * Получение данных формы\r\n     */\r\n    getData() {\r\n      let href = this.getValueByName('href');\r\n      let anchor = this.getValueByName('anchor');\r\n      let details = this.getValueByName('details');\r\n      let isEmpty = !(href || anchor || details);\r\n\r\n      return (isEmpty) ? null : { href, anchor, details };\r\n    }\r\n\r\n    /**\r\n     * Подписка на событие\r\n     * @param {string} name\r\n     * @param {Function} callback\r\n     */\r\n    on (name, callback) {\r\n      this.el.addEventListener(name, callback);\r\n    }\r\n\r\n    /**\r\n     * Создание и запуск события\r\n     * @param {string} name\r\n     * @param {Object} data\r\n     */\r\n    trigger (name, data) {\r\n      let event = new CustomEvent(name, {\r\n        bubbles: true,\r\n        detail: data\r\n      });\r\n\r\n      this.el.dispatchEvent(event);\r\n    }\r\n\r\n    /**\r\n     * Назначение слушателей событий\r\n     */\r\n    _initEvents() {\r\n      this.el.addEventListener('submit', this._onSubmit.bind(this));\r\n    }\r\n\r\n    /**\r\n     * Обработка отправки формы\r\n     * @param {FormEvent}\r\n     */\r\n    _onSubmit(event) {\r\n      event.preventDefault();\r\n      this.trigger('add', this.getData());\r\n\r\n      event.target.reset();\r\n\r\n    }\r\n\r\n  }\r\n\r\n  export {Form};\r\n\n\n\n// WEBPACK FOOTER //\n// ./components/form/form.js","\r\n  class Model {\r\n\t\tconstructor({resource, data = {}}) {\r\n\t\t\tthis.resource = resource;\r\n\t\t\tthis._handlers = {};\r\n\r\n\t\t\tthis.setData(data);\r\n\t\t}\r\n\r\n\t\tsetData (data) {\r\n\t\t\tthis._data = data;\r\n\t\t\tthis.trigger('update', this._data);\r\n\t\t}\r\n\r\n\t\tgetData () {\r\n\t\t\treturn this._data;\r\n\t\t}\r\n\r\n\t\tsave () {\r\n\t\t\tthis._makeRequset('PUT', this.resource);\r\n\t\t}\r\n\r\n\t\tfetch () {\r\n\t\t\tthis._makeRequset('GET', this.resource);\r\n\t\t}\r\n\r\n\t\ton (name, callback) {\r\n\t\t\tif (!this._handlers[name]) {\r\n\t\t\t\tthis._handlers[name] = [];\r\n\t\t\t}\r\n\r\n\t\t\tthis._handlers[name].push(callback);\r\n\t\t}\r\n\r\n\t\ttrigger (name, data) {\r\n\t\t\tif (this._handlers[name]) {\r\n\t\t\t\tthis._handlers[name].forEach(callback => callback(data));\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t_makeRequset (method, resource) {\r\n\t\t\tlet xhr = new XMLHttpRequest();\r\n\t\t\txhr.open(method, resource, true);\r\n\t\t\t// xhr.setRequestHeader('Content-type', 'application/json; charset=utf-8');\r\n\t\t\txhr.onreadystatechange = () => {\r\n\t\t\t\tif (xhr.readyState !== 4) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (xhr.status === 200) {\r\n\t\t\t\t\tlet data = JSON.parse(xhr.responseText);\r\n\r\n\r\n\r\n\t\t\t\t\tif (method === 'GET') {\r\n\t\t\t\t\t\tthis.trigger('fetch', xhr);\r\n\t\t\t\t\t\tthis.setData(data);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (method === 'PUT') {\r\n\t\t\t\txhr.send(JSON.stringify(this._data));\r\n\t\t\t} else {\r\n\t\t\t\txhr.send();\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t}\r\n\r\n  export {Model};\r\n\n\n\n// WEBPACK FOOTER //\n// ./components/model/model.js","\r\n  const httpService = {\r\n\r\n    /**\r\n     * Создание и настройка экземпляра XMLHttpRequest\r\n     * @param {string} method\r\n     * @param {string} url\r\n     * @param {Function} done\r\n     * @param {Function} fail\r\n     * @return {XMLHttpRequest}\r\n     */\r\n    _makeRequest(method, url, done, fail) {\r\n      let xhr = new XMLHttpRequest();\r\n      xhr.open(method, url);\r\n      xhr.send();\r\n\r\n      xhr.addEventListener('readystatechange', () => {\r\n\r\n        if (xhr.readyState !== 4) {\r\n          return;\r\n        }\r\n\r\n        if (xhr.status === 200)  {\r\n          done(xhr.responseText, xhr);\r\n        } else {\r\n          fail(xhr);\r\n        }\r\n      });\r\n\r\n      return xhr;\r\n    },\r\n\r\n    /**\r\n     * GET запрос\r\n     * @param {string} url\r\n     * @return {Promise}\r\n     */\r\n    get (url) {\r\n      return new Promise((resolve, reject) => {\r\n        this._makeRequest('GET', url, resolve, reject);\r\n      });\r\n\r\n    },\r\n\r\n    post() {\r\n      throw new Error('post method is not ready yet');\r\n    }\r\n  };\r\n\r\n  export {httpService};\r\n\n\n\n// WEBPACK FOOTER //\n// ./components/services/http.js"],"sourceRoot":""}